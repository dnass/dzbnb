{% extends "base.html" %}
{% block title %}User Details{% endblock %}
{% block content %}
<h1>User Details</h1>
<table width="80%" class="table-bordered">
  <tr>
    <th class="text-right" scope="row">User name:</th>
    <td>{{ user.name }}</td>
  </tr>
  <tr>
    <th class="text-right" scope="row">Email:</th>
    <td>{{ user.email }}</td>
  </tr>
  <tr>
    <th class="text-right" scope="row">Joined at:</th>
    <td>{{ user.reg_time }}</td>
  </tr>
  <tr>
    <th class="text-right" scope="row">Last login at:</th>
    <td>{{ user.last_login }}</td>
  </tr>
  <tr>
    <th class="text-right" scope="row">This user has logged in</th>
    <td>{{ user.login_count }} times.</td>
  </tr>
</table>
{% if properties %}
<h2>Properties of this user</h2>
<table width="80%" class="table-bordered">
  <tr>
    <th scope="col">Name</th>
    <th scope="col">Size</th>
    <th scope="col">Price</th>
    <th scope="col">Creation_date</th>
  </tr>
{% for p in properties %}
  <tr>
    <td><a href="{{ p.propertydetail }}">{{ p.name }}</a></td>
    <td>{{ p.size }}</td>
    <td>{{ p.price }}</td>
    <td>{{ p.creation_date }}</td>
  </tr>
{% endfor %}
</table>
{% empty %}
<h2>This user has not listed properties.</h2>
{% endif %}
{% if reviews %}
<h2>Reviews added by this user</h2>
<table width="80%" class="table-bordered">
  <tr>
    <th scope="col">Property name</th>
    <th scope="col">Rating</th>
    <th scope="col">Comment</th>
    <th scope="col">Review_time</th>
{% if admin %}
    <th scope="col">admin</th>
{% endif %}
  </tr>
{% for r in reviews %}
  <tr>
    <td><a href="{{ p.propertydetail }}">{{ r.property_name }}</a></td>
    <td>{{ r.rating }}</td>
    <td>{{ r.comment }}</td>
    <td>{{ r.review_time }}</td>
    {% if admin %}
    <td>
      {% if r.hidden %}
      <a href="#">Hide</a>
      {% else %}
      <a href="#">Unhide</a>
      {% endif %}
    </td>
    {% endif %}
{% endfor %}
  </tr>
</table>
{% empty %}
<h2>This user has not reviewed any properties.</h2>
{% endif %}
{% if admin %}
<h2>Admin</h2>
<div class="text-center"><a href="#">Hide this user</a> | <a href="#">Unhide this user</a> | <a href="#">Edit this user </a></div>
{% endif %}
{% endblock %}